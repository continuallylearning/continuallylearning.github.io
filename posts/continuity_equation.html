<!DOCTYPE html>
<html lang="en">
<head>
<link href="https://cdn.jsdelivr.net/npm/prismjs/themes/prism.min.css" rel="stylesheet" />
<script src="https://cdn.jsdelivr.net/npm/prismjs/prism.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/prismjs/components/prism-python.min.js"></script>

  <meta charset="utf-8">
  <!-- TODO: Make the title match the actual article title-->
  <title>Title of First Post — Your Name</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <link rel="stylesheet" href="../style.css">

  <!-- MathJax -->
  <script>
    window.MathJax = {
      tex: {
        inlineMath: [['$', '$'], ['\\(', '\\)']],
        displayMath: [['$$','$$'], ['\\[','\\]']]
      },
      svg: { fontCache: 'global' }
    };
  </script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js" async></script>
</head>
<body>
  <div class="container">
    <p><a href="../index.html">&larr; Back to home</a></p>

    <article>
      <h1>Flux, Flow, and the Continuity Equation</h1>
      <!-- TODO: Set time correctly-->
      <!-- TODO: Spellcheck-->
      <!-- TODO: Make it clear why we bold certain things and not others. -->
      <!-- TODO: Make it possible that types for each thing are in one place and I can just reference them rather than type each time -->
      <!-- TODO: Look at the integral form -->
      <!-- TODO: give examples of equations application-->
      <!-- TODO: Write up some code along with this.-->
      <!-- TODO: Ask Chatgpt to take a look, it recommended differentiating flux (scalar representing surface integral of flux) and flux (vector quantity) density which seems like a good idea-->
      <p><time datetime="2025-09-20">September 20, 2025</time></p>

      The continuity equation describes a type of conservation law, specifically that a quantity can either be (locally) transported, generated, or destroyed. For the continuity equation to hold, a specific relationship between the density and flow of a quantity must be true, which we describe now:

      <p>According to <a href="https://en.wikipedia.org/wiki/Continuity_equation#Differential_form">Wikipedia</a>, the continuity equation can be written in differenatial form as follows:</p>
      <!-- TODO: Note about bolding vector field-->
      <p>$$
        \frac{\partial\rho}{\partial t} + \nabla \cdot \textbf{j} = \sigma 
      $$
      </p>

      <p>
      To understand this equation, we will define all the terms and operators, in addition to defining their units/types to make it clear why the equation makes sense.
      <ul>
        <li>$\rho$(x,t) is a scalar field representing the density of a quantity $q$ at a position $x$ at time $t$.
          <ul>
            <li>$x : \mathbb{R}^d$ represents position in space. Say the units are meters $m$.</li>
            <li>$t : \mathbb{R}$ represents point in time. Say the units are seconds $s$.</li>
            <li>$\rho : \mathbb{R}^d \times \mathbb{R} \rightarrow \mathbb{R} $ represents density, which is the amount of quantity per unit volume. Say the units are $\frac{q}{m^3}$.</li>
            <li>$\frac{\partial\rho}{\partial t}(x,t) :  \mathbb{R}^d \times \mathbb{R} \rightarrow \mathbb{R}$ represents the derivative of density w.r.t time, or the rate of change of density (at a given point in space and time). Since the units of $\rho$ are $\frac{q}{m^3}$, and we're taking the derivative of it w.r.t time, then the units of $\frac{\partial\rho}{\partial t}$ is $\frac{\frac{q}{m^3}}{s} = \frac{q}{sm^3}$ (since derivative has units of the ratio between output and input variable types, see definition of derivative for more information.)
            </li>
            <li>Since $\frac{\partial\rho}{\partial t}$ has units $\frac{q}{sm^3}$, and in the continuity equation we add it to $\nabla \cdot \textbf{j}$, and we can only add things together that have the same units, we better make sure that $\nabla \cdot \textbf{j}$ has the same units. Let's check that out. </li>
          </ul>
        </li>
        <li>$\textbf{j} = \rho\textbf{v}$ is the flux of $q$, where flux represents total the amount of $q$ per unit time ($s$) per unit surface area. Say the units are $\frac{q}{sm^2}$
          <ul>
            <li>$\textbf{j}(x,t) :  \mathbb{R}^d \times \mathbb{R} \rightarrow \mathbb{R}^d$ is a vector field that is a product of the density and flow of a quantity..</li>
            <li>$\textbf{v}(x,t) : \mathbb{R}^d \times \mathbb{R} \rightarrow \mathbb{R}^d $ is the flow (or velocity field), a vector field that represents the velocity of the quantity at some point in space ($x$) and time ($t$). Velocity is a ratio of change in position over change in time, so say the units are $\frac{m}{s}$</li>
            <li>Let's confirm the units of flux ($\frac{q}{sm^2}$) agrees with the units we get when we multiply the density of q $\rho$ with the flow $\textbf{v}$. Since $\rho$ has units $\frac{q}{m^3}$ and $\textbf{v}$ has units $\frac{m}{s}$ then:
              
              $$\rho \textbf{v} : (\frac{q}{m^3})(\frac{m}{s}) = \frac{q}{sm^2}$$

            </li>
            <li>It's acceptable to multiply $\rho$ and $\textbf{v}$ because $v$ is a vector and $\rho$ is a scalar, so the resulting flux vector $\textbf{j}$ points in the same direction as the flow, but its magnitude is scaled by the density $\rho$. Notice that both flux and flow maps a spatial vector (size $d$) and a point in time (size $1$) to a vector with same shape as the spatial vector (size $d$)</li>
          </ul>
        </li>
        <li>$\nabla \cdot$ is the divergence operator. It maps a vector field $\textbf{f}(x_1,...,x_n) : \mathbb{R}^d \rightarrow \mathbb{R}^d=\begin{bmatrix} y_1(x_1,..,x_n) \\ ... \\ y_n(x_1,...,x_n) \end{bmatrix}$ to a scalar field $(\nabla \cdot \textbf{f})(x_1,...x_n) : \mathbb{R}^d \rightarrow \mathbb{R}$ via 
          $$(\nabla \cdot \textbf{f})(x_1,...x_n) = \sum_{i=1}^{n} \frac{\partial y_i}{\partial x_i}(x_1,...,x_n)$$
          <ul>
            <li>
              Since the divergence operator is summing up partial derivatives $\frac{\partial y_i}{\partial x_i}$, the units of the resulting scalar field are the same as the units of the partial derivatives. Since the (partial) derivative is a ratio between the change in the function $y_i$ and the change in the input variable $x_i$, then if the units of $y_i$ are $a$ and the units of $x_i$ are $b$, then the units of $\nabla \cdot f$ are $\frac{a}{b}$
            </li>
            <li>
              ⚠️ We have to be careful when thinking about $\nabla \cdot \textbf{j}$, because $\textbf{j} : \mathbb{R}^d \times \mathbb{R} \rightarrow \mathbb{R}^d$ has $d+1$ input dimensions ($d$ for space, $1$ for time), and has $d$ output dimensions ($d$ for space), but our definition of divergence wants the number of input and output dimensions to be the same. We "ignore" the time dimension because we are interested in calculating, at a fixed point in time, the total flux over a spatial surface of an iniftinitely small volume centered at a fixed point in space. We could say $\textbf{j}_{t}(x_1,...,x_n) = \textbf{j}(x_1,...,x_n,t)$ and work with $j_{t}$ to make things more clear (but we won't). This may also be clearer when examining the relationship between divergences and surface integrals via the Fundamental Theorem for Divergences, but that is not explored now.
              <!-- TODO: Zoheb says this can be better unerstood via 4-gradients, check out wikipedia page linked above on relativity -->
            </li>
            <li>
              Let's compute the units of $\nabla \cdot \textbf{j}$. We know that the (relevant) input variables for $\textbf{j}$ are spatial ($m$, see note above), and that the output variable units are $\frac{q}{sm^2}$. Since $\nabla \cdot f$ takes a vector field $f$ and produces a scalar field whose output variables are of units $\frac{a}{b}$ where $a$ and $b$ are the output and input units of $f$, then $\nabla \cdot \textbf{j}$ has units $\frac{\frac{q}{sm^2}}{m} = \frac{q}{sm^3}$. 
            </li>
            <li> <!-- TODO: Add hyperlink refs to jump around the page -->
              We just confirmed that $\frac{\partial \rho}{\partial t}$ and $\nabla \cdot \textbf{j}$ have the same units of $\frac{q}{sm^3}$, which means we can add them together like is done in the continuity equation. That's great! The last thing is we need to define $\sigma$, and make sure it has the same units.
            </li>
          </ul>
        </li>
        <li>
          $\sigma(x,t)$ represents the amount of $q$ generated per unit volume per unit time, and it's a scalar field. The units are therefore $\frac{q}{sm^3}$, which matches the left side of the equation, which means everything "types out" correctly.
          <ul>
          <li>When $\sigma$ positive, it represents a source from which $q$ is generated, and when it's negative, it represents a sink for where $q$ is removed.
          </li>
          <li>
            When $q$ represents a conserved quantity (a quantity that can't be generated or destroyed, only transferred), then $\sigma=0$, which would mean $\frac{\partial\rho}{\partial t} = - \nabla \cdot \textbf{j}$.
          </li>
          </ul>
        </li>
      </ul>
      </p>

      <!--
      <h2>Some section</h2>
      <p> More content… robotics, physics, whatever. </p>

<pre><code class="language-python">def hello(name):
    print(f"Hello, {name}!")

hello("world")
</code></pre>

    </article>

    <footer>
      <p><a href="../index.html">← Back to home</a></p>
    </footer>
  </div>
</body>

<script>
document.addEventListener("DOMContentLoaded", () => {
  document.querySelectorAll("pre code").forEach(block => {
    let button = document.createElement("button");
    button.textContent = "Copy";
    button.style.cssText = "float:right; margin:4px; font-size:0.8rem;";
    button.addEventListener("click", () => {
      navigator.clipboard.writeText(block.innerText);
      button.textContent = "Copied!";
      setTimeout(() => button.textContent = "Copy", 2000);
    });
    block.parentNode.insertBefore(button, block);
  });
});
</script>
-->

</html>
